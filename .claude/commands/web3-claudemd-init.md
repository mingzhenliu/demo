# CLAUDE.md 初始化指南

## 任务说明

请分析此代码库并创建 `CLAUDE.md` 文件，该文件将提供给未来的 Claude Code 实例在此仓库中工作时使用。

---

## 需要添加的内容

### 1. 常用命令

例如如何构建、检查和运行测试。包括在此代码库中开发的必要命令，例如如何运行单个测试。

### 2. 高层代码架构和结构

以便未来的实例能够更快地提高生产力。重点关注需要阅读多个文件才能理解的"宏观"架构。

---

## 使用说明

- 如果已经存在 `CLAUDE.md`，请提出改进建议
- 在创建初始 `CLAUDE.md` 时，不要重复自己，也不要包含显而易见的说明（如"向用户提供有用的错误消息"、"为所有新工具编写单元测试"、"切勿在代码或提交中包含敏感信息"等）
- 避免列出每个组件或可以轻松发现的文件结构
- 不要包含通用的开发实践
- 如果存在 Cursor 规则（在 `.cursor/rules/` 或 `.cursorrules` 中）或 Copilot 规则（在 `.github/copilot-instructions.md` 中），请确保包含重要部分
- 如果存在 `README.md`，请确保包含重要部分
- 不要编造信息（如"常见开发任务"、"开发提示"、"支持和文档"），除非这些内容明确包含在您阅读的其他文件中
- 如果存在 L0 知识库路径 `.knowledge/upstream/L0-enterprise/`，请根据架构原则、技术栈、安全基线等要求，提取最重要的内容

---

## 文件头部模板

确保在文件前加上以下文本：

```markdown
# CLAUDE.md

此文件为 Claude Code (claude.ai/code) 在此仓库中工作时提供指导。
```

---

## Claude 工作偏好

### 语言要求

- **对话语言**: 请使用**中文**进行所有对话和解释

### 代码分析工具策略

- **优先使用 LSP 工具**: 在进行代码静态语义分析时（如查找定义、引用、符号等），请优先使用 `LSP` 工具而不是 `Grep`/`Glob` 等搜索工具
- **降级策略**: 仅当 LSP 工具不可用或操作失败时，才使用 `Grep`/`Glob` 等文本搜索工具

**适用场景**:

| 操作 | 工具 | LSP 方法 |
|------|------|----------|
| 查找函数/方法定义 | ✅ LSP | `goToDefinition` |
| 查找符号引用 | ✅ LSP | `findReferences` |
| 查看类型信息 | ✅ LSP | `hover` |
| 浏览项目符号 | ✅ LSP | `documentSymbol` / `workspaceSymbol` |
| LSP 失败或不支持 | ⚠️ 降级 | `Grep` 搜索 |
