---
description: 使用6个专业子代理对项目进行全面架构分析，生成完整的项目文档。
---

## 概述

对项目进行全面的架构分析，并行调用6个专业子代理，生成完整的技术文档。

## 执行指令

**并行启动以下6个子代理进行分析：**

### 1. code-structure-analyzer - 代码结构分析

```
分析当前项目的代码结构。识别关键架构组件、抽象模式、服务/模块组织方式。生成结构化的分析报告，包括：
1. 项目整体架构模式
2. 核心模块和组件
3. 目录结构设计
4. 关键抽象和设计模式
5. 模块间关系
```

### 2. dependency-analyzer - 依赖关系分析

```
分析当前项目的依赖关系。映射内部组件和外部依赖之间的关系，包括：
1. 包依赖分析（package.json, pom.xml等）
2. 第三方库使用情况
3. 服务集成点
4. 组件依赖关系图
5. 模块化改进建议
```

### 3. data-flow-analyzer - 数据流分析

```
分析当前项目的数据流。跟踪数据在应用中的流动、转换和持久化过程，包括：
1. 数据结构定义
2. 数据转换模式
3. 存储机制
4. 信息生命周期
5. 数据完整性和一致性分析
```

### 4. request-flow-analyzer - 请求流分析

```
分析当前项目的请求流。映射外部请求如何进入、转换和退出系统，包括：
1. 控制流跟踪
2. 中间件链分析
3. 请求生命周期映射
4. 响应处理流程
5. 性能优化建议
```

### 5. api-analyzer - API接口分析

```
分析当前项目的API接口。分析暴露和消费的API，包括：
1. REST API端点文档
2. GraphQL/gRPC/WebSocket服务（如有）
3. API集成点分析
4. 外部服务依赖
5. API设计质量评估
```

### 6. code-documenter - 项目文档生成

```
分析当前项目并生成全面的README.md文档。将代码分析转化为清晰、结构良好的Markdown文档，包括：
1. 项目概述
2. 技术栈
3. 项目结构
4. 核心功能说明
5. 快速开始指南
6. API文档概要
```

## 输出结构

```
项目根目录/
├── README.md                          # 项目主文档
└── knowledge/ai/
    ├── structure_analysis.md          # 代码结构分析
    ├── dependency_analysis.md         # 依赖关系分析
    ├── data_flow_analysis.md          # 数据流分析
    ├── request_flow_analysis.md       # 请求流分析
    └── api_analysis.md                # API接口分析
```

## 执行要求

1. **并行执行**: 所有6个子代理必须并行启动，提高效率
2. **错误重试**: 如遇连接错误，自动重试失败的子代理
3. **结果汇总**: 所有分析完成后，生成综合摘要报告

## 综合报告模板

分析完成后，输出以下格式的摘要：

```markdown
## 📊 项目分析总览

### 1. 代码结构分析 ✅
- 架构模式: [描述]
- 核心模块: [列表]
- 📄 文档: `.ai/docs/structure_analysis.md`

### 2. 依赖分析 ✅
- 技术栈: [描述]
- 健康评分: [评分]
- 📄 文档: `.ai/docs/dependency_analysis.md`

### 3. 数据流分析 ✅
- 数据模型: [描述]
- 存储机制: [描述]
- 📄 文档: `.ai/docs/data_flow_analysis.md`

### 4. 请求流分析 ✅
- 中间件链: [描述]
- 优化建议: [要点]
- 📄 文档: `.ai/docs/request_flow_analysis.md`

### 5. API分析 ✅
- 端点数量: [数量]
- 质量评分: [评分]
- 📄 文档: `.ai/docs/api_analysis.md`

### 6. 项目文档 ✅
- 📄 文档: `README.md`

## 🎯 关键发现总结

| 维度 | 状态 | 说明 |
|------|------|------|
| 架构设计 | [状态] | [说明] |
| 安全机制 | [状态] | [说明] |
| 可观测性 | [状态] | [说明] |
| 改进建议 | - | [要点] |
```

## 参考文档

详细的命令说明请参考: `.knowledge/architecture/full-analysis.md`
